<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/compose.css">
		<link rel="stylesheet" href="dist/theme/one-dark.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/atom-one-dark.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>Compose for Android</section>
				<section data-auto-animate>
					<p>Declarative</p>
					<p>UI framework</p>
				</section>
				<section data-auto-animate>
					<p class="word-highlight">Declarative</p>
					<p>ðŸ¤”</p>
				</section>
				<section>
					<pre><code class="language-kotlin" data-trim data-line-numbers="2|4-7|9-11">
						sealed class PageState {
							data class Loading(): PageState()

							data class Error(
								val code: String,
								val message: String
							): PageState()

							data class Success(
								val content: Content
							): PageState()
						}
					</code></pre>
				</section>
				<section data-auto-animate>
					<pre data-id="vm-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageViewModel: ViewModel() {
							var state by mutableLiveDataOf(PageState.Loading())
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="vm-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageViewModel: ViewModel() {
							var state by mutableLiveDataOf(PageState.Loading())

							fun onResponse(content: Content) {
								state = PageState.Success(content)
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="vm-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageViewModel: ViewModel() {
							var state by mutableLiveDataOf(PageState.Loading())

							fun onResponse(content: Content) {
								state = PageState.Success(content)
							}

							fun onError(code: String, message: String) {
								state = PageState.Error(code, message)
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="fr-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageFragment: Fragment() {
							//...
							fun onStateChanged(pageState: PageState) {
								when (pageState) {
								}
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="fr-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageFragment: Fragment() {
							//...
							fun onStateChanged(pageState: PageState) {
								when (pageState) {
									is PageState.Loading -> {
										loadingView.setVisibility(View.VISIBLE)
										contentView.setVisibility(View.INVISIBLE)
										errorView.setVisibility(View.INVISIBLE)
									}
								}
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="fr-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageFragment: Fragment() {
							fun onStateChanged(pageState: PageState) {
								when (pageState) {
									// is PageState.LOADING
									is PageState.Error -> {
										errorMessageTv.setText(pageState.message)
										loadingView.setVisibility(View.INVISIBLE)
										contentView.setVisibility(View.INVISIBLE)
										errorView.setVisibility(View.VISIBLE)
									}
								}
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="fr-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageFragment: Fragment() {
							fun onStateChanged(pageState: PageState) {
								when (pageState) {
									// is PageState.LOADING
									// is PageState.ERROR
									is PageState.Success -> {
										setContent(pageState.content)
										loadingView.setVisibility(View.INVISIBLE)
										contentView.setVisibility(View.VISIBLE)
										errorView.setVisibility(View.INVISIBLE)
									}
								}
							}
						}
					</code>
					</pre>
				</section>
				<section data-auto-animate>
					<pre data-id="fr-animation">
					<code class="language-kotlin" data-trim data-line-numbers>
						class PageFragment: Fragment() {
							fun onStateChanged(pageState: PageState) {
								when (pageState) {
									// is PageState.LOADING
									// is PageState.ERROR
									is PageState.Success -> {
										setContent(pageState.content)
										loadingView.setVisibility(View.INVISIBLE)
										animateContentIn()
										errorView.setVisibility(View.INVISIBLE)
									}
								}
							}
						}
					</code>
					</pre>
				</section>
				<section data-transition="zoom-out fade-out">
					<p class="stamp code fragment" style="left:25%;top:300%;scale:1.4">setText()</p>
					<p class="stamp code fragment" style="left:75%;top:-320%;scale:1.2">show()</p>
					<p class="stamp code fragment" style="left:15%;top:15%;scale:1.6">hide()</p>
					<p class="stamp code fragment" style="left:65%;top:60%;scale:0.9">add()</p>
					<p class="stamp code fragment" style="left:75%;top:240%;scale:1.2">remove()</p>
					<p class="stamp code fragment" style="left:5%;top:-360%;scale:0.8">update()</p>
					<p class="stamp code fragment" style="left:40%;top:-210%;scale:1.2">DiffUtil</p>
					ðŸ”¨
				</section>
				<section data-transition="zoom-in fade-in">
					<p class="serif">We mutate the UI to match our state</p>
					<p class="serif fragment">For all possible combinations of <code class="blue">previous state</code> and <code class="blue">current state</code></p>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
